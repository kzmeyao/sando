---
import Header from "../components/Header.astro";
import Button from "../components/Button.astro";
import Main from "../layouts/main.astro";
import { GraphQLClient } from "graphql-request";

import type { Set } from "../generated/graphql";

const client = new GraphQLClient(import.meta.env.ASTRO_HYGRAPH_ENDPOINT);

const { sets }: { sets: Set[] } = await client.request(`
  query Sets {
    sets(orderBy: date_DESC) {
      date
      displayTitle
      slug
    }
  }`);
---

<Main content={{ title: "sando" }}>
	<Header />
	<div class="grid place-items-center h-screen content-center bg-stone-500">
		{
			sets.map((set) => (
				<a href={`/set/${set.slug}`}>
					<Button key={set.slug}>
						{set.date}&nbsp;{set.displayTitle}
					</Button>
				</a>
			))
		}
	</div>
</Main>
